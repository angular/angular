{"version":3,"file":"demo-application-operations.js","sourceRoot":"","sources":["demo-application-operations.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {inject} from '@angular/core';\nimport {ApplicationOperations} from '../projects/ng-devtools';\nimport {DirectivePosition, ElementPosition, SignalNodePosition} from '../projects/protocol';\nimport {LOCAL_STORAGE} from './local-storage';\n\nconst STORAGE_KEY = 'ng-dt-storage-sim';\n\nexport class DemoApplicationOperations extends ApplicationOperations {\n  private readonly localStorage = inject(LOCAL_STORAGE);\n\n  override viewSource(position: ElementPosition): void {\n    console.warn('viewSource() is not implemented because the demo app runs in an Iframe');\n    throw new Error('Not implemented in demo app.');\n  }\n\n  override selectDomElement(position: ElementPosition): void {\n    console.warn('selectDomElement() is not implemented because the demo app runs in an Iframe');\n    throw new Error('Not implemented in demo app.');\n  }\n\n  override inspect(directivePosition: DirectivePosition, keyPath: string[]): void {\n    console.warn('inspect() is not implemented because the demo app runs in an Iframe');\n    return;\n  }\n\n  override inspectSignal(position: SignalNodePosition): void {\n    console.warn('inspectSignal() is not implemented because the demo app runs in an Iframe');\n    return;\n  }\n\n  override viewSourceFromRouter(name: string, type: string): void {\n    console.warn(\n      'viewSourceFromRouter() is not implemented because the demo app runs in an Iframe',\n    );\n    throw new Error('Not implemented in demo app.');\n  }\n\n  override async setStorageItems(items: {[key: string]: unknown}): Promise<void> {\n    const currItems = this.getLsItems();\n    this.setLsItems({...currItems, ...items});\n  }\n\n  override async getStorageItems(items: string[]): Promise<{[key: string]: unknown}> {\n    const currItems = this.getLsItems();\n    const redundant = Object.keys(currItems).filter((prop) => !items.includes(prop));\n\n    for (const item of redundant) {\n      delete currItems[item];\n    }\n\n    return currItems;\n  }\n\n  override async removeStorageItems(items: string[]): Promise<void> {\n    const currItems = this.getLsItems();\n\n    for (const item of items) {\n      delete currItems[item];\n    }\n    this.setLsItems(currItems);\n  }\n\n  private getLsItems(): {[key: string]: unknown} {\n    const storage = this.localStorage.getItem(STORAGE_KEY);\n\n    try {\n      return JSON.parse(storage ?? '{}');\n    } catch {\n      this.localStorage.removeItem(STORAGE_KEY);\n      console.error(\n        'Unable to parse the data from the simulated storage. Cleaning the item and returning a default object',\n      );\n      return {};\n    }\n  }\n\n  private setLsItems(items: object) {\n    try {\n      this.localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n    } catch {\n      console.error('Unable to set item in the simulated storage.');\n    }\n  }\n}\n"]}