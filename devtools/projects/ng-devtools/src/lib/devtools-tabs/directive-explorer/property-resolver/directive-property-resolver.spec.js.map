{"version":3,"file":"directive-property-resolver.spec.js","sourceRoot":"","sources":["directive-property-resolver.spec.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {ÉµFramework as Framework} from '@angular/core';\nimport {Properties, PropType} from '../../../../../../protocol';\n\nimport {DirectivePropertyResolver} from './directive-property-resolver';\n\nconst properties: Properties = {\n  props: {\n    o: {\n      editable: false,\n      expandable: true,\n      preview: '',\n      type: PropType.Object,\n      value: {\n        a1: {\n          editable: false,\n          expandable: false,\n          preview: '',\n          type: 1,\n          value: {},\n        },\n        b1: {\n          editable: false,\n          expandable: false,\n          preview: '',\n          type: 1,\n          value: {},\n        },\n      },\n      containerType: null,\n    },\n    i: {\n      editable: false,\n      expandable: true,\n      preview: '',\n      type: PropType.Object,\n      value: {\n        b1: {\n          editable: false,\n          expandable: false,\n          preview: '',\n          type: 1,\n          value: {},\n        },\n        a1: {\n          editable: false,\n          expandable: false,\n          preview: '',\n          type: 1,\n          value: {},\n        },\n      },\n      containerType: null,\n    },\n    p: {\n      editable: false,\n      expandable: true,\n      preview: '',\n      type: PropType.Object,\n      value: {\n        b1: {\n          editable: false,\n          expandable: false,\n          preview: '',\n          type: 1,\n          value: {},\n        },\n        a1: {\n          editable: false,\n          expandable: false,\n          preview: '',\n          type: 1,\n          value: {},\n        },\n      },\n      containerType: null,\n    },\n    i_1: {\n      editable: true,\n      expandable: false,\n      preview: 'input i1',\n      type: PropType.String,\n      value: 'input i1',\n      containerType: null,\n    },\n    o_1: {\n      editable: false,\n      expandable: true,\n      preview: '',\n      type: PropType.Object,\n      containerType: null,\n    },\n  },\n  metadata: {\n    framework: Framework.Angular,\n    inputs: {\n      i: 'i',\n      i1: 'i_1',\n    },\n    outputs: {\n      o: 'o',\n      o1: 'o_1',\n    },\n    encapsulation: 0,\n    onPush: false,\n  },\n};\n\ndescribe('DirectivePropertyResolver', () => {\n  let messageBusMock: any;\n  beforeEach(() => {\n    messageBusMock = jasmine.createSpyObj('messageBus', ['on', 'once', 'emit', 'destroy']);\n  });\n\n  it('should register directive inputs, outputs, and state', () => {\n    const resolver = new DirectivePropertyResolver(messageBusMock, properties, {\n      element: [0],\n      directive: 0,\n    });\n    expect(resolver.directiveInputControls.dataSource.data[0].prop.name).toBe('i');\n    expect(resolver.directiveInputControls.dataSource.data[1].prop.name).toBe('a1');\n    expect(resolver.directiveInputControls.dataSource.data[2].prop.name).toBe('b1');\n    expect(resolver.directiveInputControls.dataSource.data[3].prop.name).toBe('i_1');\n    expect(resolver.directiveOutputControls.dataSource.data[0].prop.name).toBe('o');\n    expect(resolver.directiveOutputControls.dataSource.data[1].prop.name).toBe('a1');\n    expect(resolver.directiveOutputControls.dataSource.data[2].prop.name).toBe('b1');\n    expect(resolver.directiveOutputControls.dataSource.data[3].prop.name).toBe('o_1');\n    expect(resolver.directiveStateControls.dataSource.data[0].prop.name).toBe('p');\n  });\n\n  it('should register directive props', () => {\n    const resolver = new DirectivePropertyResolver(\n      messageBusMock,\n      {\n        props: {\n          foo: {\n            editable: false,\n            expandable: false,\n            preview: '',\n            type: PropType.Object,\n            value: {},\n            containerType: null,\n          },\n        },\n        metadata: {\n          framework: Framework.Wiz,\n          props: {\n            foo: 'foo',\n          },\n        },\n      },\n      {\n        element: [0],\n        directive: 0,\n      },\n    );\n\n    expect(resolver.directivePropControls.dataSource.data[0].prop.name).toBe('foo');\n  });\n\n  it('should sort properties', () => {\n    const resolver = new DirectivePropertyResolver(messageBusMock, properties, {\n      element: [0],\n      directive: 0,\n    });\n    const props = resolver.getExpandedProperties();\n    const propNames = props.map((o) => o.name);\n    // First level properties should be now sorted\n    expect(propNames.join('')).toEqual('ii_1oo_1p');\n  });\n});\n"]}