{"version":3,"file":"detect-angular-for-extension-icon.js","sourceRoot":"","sources":["detect-angular-for-extension-icon.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAGH,OAAO,EACL,YAAY,EACZ,qBAAqB,EACrB,eAAe,EACf,4BAA4B,GAC7B,MAAM,uBAAuB,CAAC;AAE/B,OAAO,EAAC,kBAAkB,EAAC,MAAM,yBAAyB,CAAC;AAE3D,MAAM,uBAAuB,GAAG,IAAI,kBAAkB,CACpD,mCAAmC,QAAQ,CAAC,IAAI,EAAE,EAClD,mCAAmC,QAAQ,CAAC,IAAI,EAAE,CACnD,CAAC;AAEF,SAAS,aAAa,CAAC,GAAW;IAChC,MAAM,SAAS,GAAG,YAAY,EAAE,CAAC;IACjC,MAAM,yBAAyB,GAAG,4BAA4B,EAAE,CAAC;IACjE,MAAM,WAAW,GAAG,qBAAqB,EAAE,CAAC;IAC5C,MAAM,KAAK,GAAG,eAAe,EAAE,CAAC;IAEhC,MAAM,SAAS,GAAqB;QAClC,KAAK;QACL,SAAS;QACT,WAAW;QACX,yBAAyB;QACzB,iBAAiB,EAAE,IAAI;KACxB,CAAC;IAEF,gDAAgD;IAChD,GAAG,CAAC,WAAW,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;IAEhC,gDAAgD;IAChD,uBAAuB,CAAC,IAAI,CAAC,eAAe,EAAE;QAC5C;YACE,KAAK;YACL,SAAS;YACT,WAAW;YACX,yBAAyB;YACzB,iBAAiB,EAAE,IAAI;SACxB;KACF,CAAC,CAAC;IAEH,UAAU,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AAC7C,CAAC;AAED,aAAa,CAAC,MAAM,CAAC,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {AngularDetection} from '../../../protocol';\nimport {\n  appIsAngular,\n  appIsAngularInDevMode,\n  appIsAngularIvy,\n  appIsSupportedAngularVersion,\n} from '../../../shared-utils';\n\nimport {SamePageMessageBus} from './same-page-message-bus';\n\nconst detectAngularMessageBus = new SamePageMessageBus(\n  `angular-devtools-detect-angular-${location.href}`,\n  `angular-devtools-content-script-${location.href}`,\n);\n\nfunction detectAngular(win: Window): void {\n  const isAngular = appIsAngular();\n  const isSupportedAngularVersion = appIsSupportedAngularVersion();\n  const isDebugMode = appIsAngularInDevMode();\n  const isIvy = appIsAngularIvy();\n\n  const detection: AngularDetection = {\n    isIvy,\n    isAngular,\n    isDebugMode,\n    isSupportedAngularVersion,\n    isAngularDevTools: true,\n  };\n\n  // For the background script to toggle the icon.\n  win.postMessage(detection, '*');\n\n  // For the content script to inject the backend.\n  detectAngularMessageBus.emit('detectAngular', [\n    {\n      isIvy,\n      isAngular,\n      isDebugMode,\n      isSupportedAngularVersion,\n      isAngularDevTools: true,\n    },\n  ]);\n\n  setTimeout(() => detectAngular(win), 1000);\n}\n\ndetectAngular(window);\n"]}