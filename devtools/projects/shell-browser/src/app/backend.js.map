{"version":3,"file":"backend.js","sourceRoot":"","sources":["backend.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAEH,OAAO,EAAC,oBAAoB,EAAC,MAAM,8BAA8B,CAAC;AAElE,OAAO,EAAC,WAAW,EAAC,MAAM,kDAAkD,CAAC;AAE7E,OAAO,EAAC,kCAAkC,EAAC,MAAM,4BAA4B,CAAC;AAC9E,OAAO,EAAC,kBAAkB,EAAC,MAAM,yBAAyB,CAAC;AAE3D,MAAM,UAAU,GAAG,IAAI,kBAAkB,CACvC,4BAA4B,QAAQ,CAAC,IAAI,EAAE,EAC3C,mCAAmC,QAAQ,CAAC,IAAI,EAAE,CACnD,CAAC;AAEF,IAAI,WAAW,GAAG,KAAK,CAAC;AACxB,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,EAAE;IAC9B,IAAI,WAAW,EAAE,CAAC;QAChB,OAAO;IACT,CAAC;IACD,WAAW,GAAG,IAAI,CAAC;IACnB,oBAAoB,CAAC,UAAU,CAAC,CAAC;IACjC,kCAAkC,EAAE,CAAC;IAErC,IAAI,gBAAgB,GAAG,KAAK,CAAC;IAC7B,UAAU,CAAC,EAAE,CAAC,gBAAgB,EAAE,GAAG,EAAE;QACnC,gBAAgB,GAAG,IAAI,CAAC;IAC1B,CAAC,CAAC,CAAC;IAEH,UAAU,CAAC,EAAE,CAAC,cAAc,EAAE,GAAG,EAAE;QACjC,gBAAgB,GAAG,KAAK,CAAC;IAC3B,CAAC,CAAC,CAAC;IAEH,2FAA2F;IAC3F,gGAAgG;IAChG,QAAQ,CAAC,gBAAgB,CACvB,WAAW,EACX,GAAG,EAAE;QACH,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtB,WAAW,EAAE,CAAC;QAChB,CAAC;IACH,CAAC,EACD,KAAK,CACN,CAAC;IAEF,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AAClC,CAAC,CAAC,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {initializeMessageBus} from '../../../ng-devtools-backend';\n\nimport {unHighlight} from '../../../ng-devtools-backend/src/lib/highlighter';\n\nimport {initializeExtendedWindowOperations} from './chrome-window-extensions';\nimport {SamePageMessageBus} from './same-page-message-bus';\n\nconst messageBus = new SamePageMessageBus(\n  `angular-devtools-backend-${location.href}`,\n  `angular-devtools-content-script-${location.href}`,\n);\n\nlet initialized = false;\nmessageBus.on('handshake', () => {\n  if (initialized) {\n    return;\n  }\n  initialized = true;\n  initializeMessageBus(messageBus);\n  initializeExtendedWindowOperations();\n\n  let inspectorRunning = false;\n  messageBus.on('inspectorStart', () => {\n    inspectorRunning = true;\n  });\n\n  messageBus.on('inspectorEnd', () => {\n    inspectorRunning = false;\n  });\n\n  // handles case when mouse leaves chrome extension too quickly. unHighlight() is not a very\n  // expensive function and has an if check so it's DOM api call is not called more than necessary\n  document.addEventListener(\n    'mousemove',\n    () => {\n      if (!inspectorRunning) {\n        unHighlight();\n      }\n    },\n    false,\n  );\n\n  messageBus.emit('backendReady');\n});\n"]}