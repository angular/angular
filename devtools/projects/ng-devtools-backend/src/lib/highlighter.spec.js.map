{"version":3,"file":"highlighter.spec.js","sourceRoot":"","sources":["highlighter.spec.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport * as highlighter from './highlighter';\n\ndescribe('highlighter', () => {\n  describe('findComponentAndHost', () => {\n    it('should return undefined when no node is provided', () => {\n      expect(highlighter.findComponentAndHost(undefined)).toEqual({component: null, host: null});\n    });\n\n    it('should return same component and host if component exists', () => {\n      (window as any).ng = {\n        getComponent: (el: any) => el,\n      };\n      const element = document.createElement('div');\n      const data = highlighter.findComponentAndHost(element as any);\n      expect(data.component).toBeTruthy();\n      expect(data.host).toBeTruthy();\n      expect(data.component).toEqual(data.host);\n    });\n\n    it('should return null component and host if component do not exists', () => {\n      (window as any).ng = {\n        getComponent: () => undefined,\n      };\n      const element = document.createElement('div');\n      const data = highlighter.findComponentAndHost(element as any);\n      expect(data.component).toBeFalsy();\n      expect(data.host).toBeFalsy();\n    });\n  });\n\n  describe('getComponentName', () => {\n    it('should return null when called with null values', () => {\n      let name = highlighter.getDirectiveName(null);\n      expect(name).toBe('unknown');\n\n      name = highlighter.getDirectiveName(undefined);\n      expect(name).toBe('unknown');\n    });\n\n    it('should return correct component name', () => {\n      const MOCK_COMPONENT = {\n        constructor: {\n          name: 'mock-component',\n        },\n      };\n\n      const name = highlighter.getDirectiveName(MOCK_COMPONENT as any);\n      expect(name).toBe(MOCK_COMPONENT.constructor.name);\n    });\n  });\n\n  describe('inDoc', () => {\n    it('should return false if no node is provided', () => {\n      expect(highlighter.inDoc(undefined)).toBeFalsy();\n    });\n\n    it('should be true if doc and node are equal', () => {\n      const node = {\n        parentNode: {},\n        ownerDocument: {\n          documentElement: {},\n        },\n      };\n\n      node.ownerDocument.documentElement = node;\n      expect(highlighter.inDoc(node)).toBeTruthy();\n    });\n\n    it('should be true if doc and parent are equal', () => {\n      const node = {\n        parentNode: 'node',\n        ownerDocument: {\n          documentElement: 'node',\n        },\n      };\n\n      expect(highlighter.inDoc(node)).toBeTruthy();\n    });\n\n    it('should be true if doc contains parent', () => {\n      const node = {\n        parentNode: {\n          nodeType: 1,\n        },\n        ownerDocument: {\n          documentElement: {\n            contains: () => true,\n          },\n        },\n      };\n      expect(highlighter.inDoc(node)).toBeTruthy();\n    });\n  });\n\n  // Those test were disabled since very flaky on the CI - needs investigation before re-enabling\n  xdescribe('highlightHydrationElement', () => {\n    afterEach(() => {\n      document.body.innerHTML = '';\n      delete (window as any).ng;\n    });\n\n    it('should show hydration overlay with svg', () => {\n      const appNode = document.createElement('app');\n      appNode.style.width = '500px';\n      appNode.style.height = '400px';\n      appNode.style.display = 'block';\n      document.body.appendChild(appNode);\n      (window as any).ng = {\n        getComponent: (el: any) => el,\n      };\n\n      highlighter.highlightHydrationElement(appNode, {status: 'hydrated'});\n\n      expect(document.body.querySelectorAll('div').length).toBe(2);\n      expect(document.body.querySelectorAll('svg').length).toBe(1);\n\n      const overlay = document.body.querySelector('.ng-devtools-overlay');\n      expect(overlay?.getBoundingClientRect().width).toBe(500);\n      expect(overlay?.getBoundingClientRect().height).toBe(400);\n\n      highlighter.removeHydrationHighlights();\n      expect(document.body.querySelectorAll('div').length).toBe(0);\n      expect(document.body.querySelectorAll('svg').length).toBe(0);\n    });\n\n    it('should show hydration overlay without svg (too small)', () => {\n      const appNode = document.createElement('app');\n      appNode.style.width = '25px';\n      appNode.style.height = '20px';\n      appNode.style.display = 'block';\n      document.body.appendChild(appNode);\n      (window as any).ng = {\n        getComponent: (el: any) => el,\n      };\n\n      highlighter.highlightHydrationElement(appNode, {status: 'hydrated'});\n\n      expect(document.body.querySelectorAll('div').length).toBe(1);\n      expect(document.body.querySelectorAll('svg').length).toBe(0);\n\n      const overlay = document.body.querySelector('.ng-devtools-overlay');\n      expect(overlay?.getBoundingClientRect().width).toBe(25);\n      expect(overlay?.getBoundingClientRect().height).toBe(20);\n\n      highlighter.removeHydrationHighlights();\n      expect(document.body.querySelectorAll('div').length).toBe(0);\n      expect(document.body.querySelectorAll('svg').length).toBe(0);\n    });\n\n    it('should show hydration overlay and selected component overlay at the same time ', () => {\n      const appNode = document.createElement('app');\n      appNode.style.width = '25px';\n      appNode.style.height = '20px';\n      appNode.style.display = 'block';\n      document.body.appendChild(appNode);\n      (window as any).ng = {\n        getComponent: (el: any) => el,\n      };\n\n      highlighter.highlightHydrationElement(appNode, {status: 'hydrated'});\n      highlighter.highlightSelectedElement(appNode);\n\n      expect(document.body.querySelectorAll('.ng-devtools-overlay').length).toBe(2);\n      highlighter.removeHydrationHighlights();\n      expect(document.body.querySelectorAll('.ng-devtools-overlay').length).toBe(1);\n      highlighter.unHighlight();\n      expect(document.body.querySelectorAll('.ng-devtools-overlay').length).toBe(0);\n\n      highlighter.highlightHydrationElement(appNode, {status: 'hydrated'});\n      highlighter.highlightSelectedElement(appNode);\n      highlighter.unHighlight();\n      expect(document.body.querySelectorAll('.ng-devtools-overlay').length).toBe(1);\n      highlighter.removeHydrationHighlights();\n      expect(document.body.querySelectorAll('.ng-devtools-overlay').length).toBe(0);\n    });\n  });\n\n  describe('highlightSelectedElement', () => {\n    function createElement(name: string) {\n      const element = document.createElement(name);\n      element.style.width = '25px';\n      element.style.height = '20px';\n      element.style.display = 'block';\n      document.body.appendChild(element);\n      return element;\n    }\n\n    it('should show overlay', () => {\n      const appNode = createElement('app');\n      (window as any).ng = {\n        getComponent: (el: any) => new (class FakeComponent {})(),\n      };\n\n      highlighter.highlightSelectedElement(appNode);\n\n      const overlay = document.body.querySelectorAll('.ng-devtools-overlay');\n      expect(overlay.length).toBe(1);\n      expect(overlay[0].innerHTML).toContain('FakeComponent');\n\n      highlighter.unHighlight();\n      expect(document.body.querySelectorAll('.ng-devtools-overlay').length).toBe(0);\n    });\n\n    it('should remove the previous overlay when calling highlightSelectedElement again', () => {\n      const appNode = createElement('app');\n      const appNode2 = createElement('app-two');\n\n      (window as any).ng = {\n        getComponent: (el: any) => new (class FakeComponent {})(),\n      };\n\n      highlighter.highlightSelectedElement(appNode);\n      highlighter.highlightSelectedElement(appNode2);\n      const overlay = document.body.querySelectorAll('.ng-devtools-overlay');\n      expect(overlay.length).toBe(1);\n    });\n  });\n});\n"]}