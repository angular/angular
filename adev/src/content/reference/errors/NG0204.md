# Cannot reference 'X' before initialization

This error happens if there's a circular dependency or an early reference between Angular classes (e.g., components, directives, pipes, services, or modules) that Angular can’t resolve properly at runtime.

## Debugging the error

This error occurs if you have a circular dependency between modules, components, or services that Angular can’t resolve properly.

Angular's DI system tries to resolve the useExisting reference immediately, but at that point DropdownComponent hasn’t been fully defined in memory yet. 

```typescript
@Component({
  selector: 'dropdown',
  templateUrl: './dropdown.component.html',
  providers: [
    {
      provide: NG_VALUE_ACCESSOR,
      useExisting: DropdownComponent,
      multi: true
    }
  ]
})
export class DropdownComponent implements ControlValueAccessor {
```
Wrapping it in forwardRef delays the lookup until after everything is defined.

```typescript
@Component({
  selector: 'dropdown',
  templateUrl: './dropdown.component.html',
  providers: [
    {
      provide: NG_VALUE_ACCESSOR,
      useExisting: forwardRef(() => DropdownComponent),
      multi: true
    }
  ]
})
export class DropdownComponent implements ControlValueAccessor {
```

ServiceA injects ServiceB, and ServiceB also injects ServiceA. This creates a circular reference that Angular cannot resolve:

```typescript
@Injectable({ providedIn: 'root' })
export class ServiceA {
constructor(private serviceB: ServiceB) {}
}
```

```typescript
@Injectable({ providedIn: 'root' })
export class ServiceB {
constructor(private serviceA: ServiceA) {}
}
```

Break the cycle by extracting common functionality into a third service, using Injector to lazily inject or using forwardRef.

```typescript
@Injectable({ providedIn: 'root' })
export class ServiceB {
  private serviceA: ServiceA;

  constructor(private injector: Injector) {}

  init() {
    this.serviceA = this.injector.get(ServiceA);
  }
}
```
