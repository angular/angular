{"version":3,"file":"elements.js","sourceRoot":"","sources":["elements.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAEH,OAAO,KAAK,EAAE,MAAM,UAAU,CAAC;AAG/B;;GAEG;AACH,MAAM,UAAU,eAAe,CAC7B,IAAqB;IAErB,MAAM,GAAG,GAAG,IAAI,GAAG,EAAmD,CAAC;IACvE,KAAK,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;QAC7B,IAAI,CAAC,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,EAAE,CAAC;YACjC,SAAS;QACX,CAAC;QACD,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QAErB,kFAAkF;QAClF,uFAAuF;QACvF,6EAA6E;QAC7E,uEAAuE;QACvE,IAAI,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,MAAM,CAAC,cAAc,IAAI,EAAE,CAAC,SAAS,KAAK,IAAI,EAAE,CAAC;YAClE,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC5B,CAAC;IACH,CAAC;IACD,OAAO,GAAG,CAAC;AACb,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport * as ir from '../../ir';\nimport type {CompilationUnit} from '../compilation';\n\n/**\n * Gets a map of all elements in the given view by their xref id.\n */\nexport function createOpXrefMap(\n  unit: CompilationUnit,\n): Map<ir.XrefId, ir.ConsumesSlotOpTrait & ir.CreateOp> {\n  const map = new Map<ir.XrefId, ir.ConsumesSlotOpTrait & ir.CreateOp>();\n  for (const op of unit.create) {\n    if (!ir.hasConsumesSlotTrait(op)) {\n      continue;\n    }\n    map.set(op.xref, op);\n\n    // TODO(dylhunn): `@for` loops with `@empty` blocks need to be special-cased here,\n    // because the slot consumer trait currently only supports one slot per consumer and we\n    // need two. This should be revisited when making the refactors mentioned in:\n    // https://github.com/angular/angular/pull/53620#discussion_r1430918822\n    if (op.kind === ir.OpKind.RepeaterCreate && op.emptyView !== null) {\n      map.set(op.emptyView, op);\n    }\n  }\n  return map;\n}\n"]}