{"version":3,"file":"attach_source_locations.js","sourceRoot":"","sources":["attach_source_locations.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAEH,OAAO,KAAK,EAAE,MAAM,UAAU,CAAC;AAG/B;;;GAGG;AACH,MAAM,UAAU,qBAAqB,CAAC,GAA4B;IAChE,IAAI,CAAC,GAAG,CAAC,oBAAoB,IAAI,GAAG,CAAC,oBAAoB,KAAK,IAAI,EAAE,CAAC;QACnE,OAAO;IACT,CAAC;IAED,KAAK,MAAM,IAAI,IAAI,GAAG,CAAC,KAAK,EAAE,CAAC;QAC7B,MAAM,SAAS,GAA+B,EAAE,CAAC;QAEjD,KAAK,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YAC7B,IAAI,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,MAAM,CAAC,YAAY,IAAI,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACxE,MAAM,KAAK,GAAG,EAAE,CAAC,eAAe,CAAC,KAAK,CAAC;gBACvC,SAAS,CAAC,IAAI,CAAC;oBACb,UAAU,EAAE,EAAE,CAAC,MAAM;oBACrB,MAAM,EAAE,KAAK,CAAC,MAAM;oBACpB,IAAI,EAAE,KAAK,CAAC,IAAI;oBAChB,MAAM,EAAE,KAAK,CAAC,GAAG;iBAClB,CAAC,CAAC;YACL,CAAC;QACH,CAAC;QAED,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,sBAAsB,CAAC,GAAG,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC,CAAC;QACnF,CAAC;IACH,CAAC;AACH,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport * as ir from '../../ir';\nimport type {ComponentCompilationJob} from '../compilation';\n\n/**\n * Locates all of the elements defined in a creation block and outputs an op\n * that will expose their definition location in the DOM.\n */\nexport function attachSourceLocations(job: ComponentCompilationJob): void {\n  if (!job.enableDebugLocations || job.relativeTemplatePath === null) {\n    return;\n  }\n\n  for (const unit of job.units) {\n    const locations: ir.ElementSourceLocation[] = [];\n\n    for (const op of unit.create) {\n      if (op.kind === ir.OpKind.ElementStart || op.kind === ir.OpKind.Element) {\n        const start = op.startSourceSpan.start;\n        locations.push({\n          targetSlot: op.handle,\n          offset: start.offset,\n          line: start.line,\n          column: start.col,\n        });\n      }\n    }\n\n    if (locations.length > 0) {\n      unit.create.push(ir.createSourceLocationOp(job.relativeTemplatePath, locations));\n    }\n  }\n}\n"]}