{"version":3,"file":"reify.js","sourceRoot":"","sources":["reify.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport * as o from '../../../../output/output_ast';\nimport {Identifiers} from '../../../../render3/r3_identifiers';\nimport * as ir from '../../ir';\nimport {\n  TemplateCompilationMode,\n  ViewCompilationUnit,\n  type CompilationJob,\n  type CompilationUnit,\n} from '../compilation';\nimport * as ng from '../instruction';\nimport {isAriaAttribute} from '../util/attributes';\n\n/**\n * Map of target resolvers for event listeners.\n */\nconst GLOBAL_TARGET_RESOLVERS = new Map<string, o.ExternalReference>([\n  ['window', Identifiers.resolveWindow],\n  ['document', Identifiers.resolveDocument],\n  ['body', Identifiers.resolveBody],\n]);\n\n/**\n * DOM properties that need to be remapped on the compiler side.\n * Note: this mapping has to be kept in sync with the equally named mapping in the runtime.\n */\nconst DOM_PROPERTY_REMAPPING = new Map([\n  ['class', 'className'],\n  ['for', 'htmlFor'],\n  ['formaction', 'formAction'],\n  ['innerHtml', 'innerHTML'],\n  ['readonly', 'readOnly'],\n  ['tabindex', 'tabIndex'],\n]);\n\n/**\n * Compiles semantic operations across all views and generates output `o.Statement`s with actual\n * runtime calls in their place.\n *\n * Reification replaces semantic operations with selected Ivy instructions and other generated code\n * structures. After reification, the create/update operation lists of all views should only contain\n * `ir.StatementOp`s (which wrap generated `o.Statement`s).\n */\nexport function reify(job: CompilationJob): void {\n  for (const unit of job.units) {\n    reifyCreateOperations(unit, unit.create);\n    reifyUpdateOperations(unit, unit.update);\n  }\n}\n\n/**\n * This function can be used a sanity check -- it walks every expression in the const pool, and\n * every expression reachable from an op, and makes sure that there are no IR expressions\n * left. This is nice to use for debugging mysterious failures where an IR expression cannot be\n * output from the output AST code.\n */\nfunction ensureNoIrForDebug(job: CompilationJob) {\n  for (const stmt of job.pool.statements) {\n    ir.transformExpressionsInStatement(\n      stmt,\n      (expr) => {\n        if (ir.isIrExpression(expr)) {\n          throw new Error(\n            `AssertionError: IR expression found during reify: ${ir.ExpressionKind[expr.kind]}`,\n          );\n        }\n        return expr;\n      },\n      ir.VisitorContextFlag.None,\n    );\n  }\n  for (const unit of job.units) {\n    for (const op of unit.ops()) {\n      ir.visitExpressionsInOp(op, (expr) => {\n        if (ir.isIrExpression(expr)) {\n          throw new Error(\n            `AssertionError: IR expression found during reify: ${ir.ExpressionKind[expr.kind]}`,\n          );\n        }\n      });\n    }\n  }\n}\n\nfunction reifyCreateOperations(unit: CompilationUnit, ops: ir.OpList<ir.CreateOp>): void {\n  for (const op of ops) {\n    ir.transformExpressionsInOp(op, reifyIrExpression, ir.VisitorContextFlag.None);\n\n    switch (op.kind) {\n      case ir.OpKind.Text:\n        ir.OpList.replace(op, ng.text(op.handle.slot!, op.initialValue, op.sourceSpan));\n        break;\n      case ir.OpKind.ElementStart:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domElementStart(\n                op.handle.slot!,\n                op.tag!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.startSourceSpan,\n              )\n            : ng.elementStart(\n                op.handle.slot!,\n                op.tag!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.startSourceSpan,\n              ),\n        );\n        break;\n      case ir.OpKind.Element:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domElement(\n                op.handle.slot!,\n                op.tag!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.wholeSourceSpan,\n              )\n            : ng.element(\n                op.handle.slot!,\n                op.tag!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.wholeSourceSpan,\n              ),\n        );\n        break;\n      case ir.OpKind.ElementEnd:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domElementEnd(op.sourceSpan)\n            : ng.elementEnd(op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.ContainerStart:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domElementContainerStart(\n                op.handle.slot!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.startSourceSpan,\n              )\n            : ng.elementContainerStart(\n                op.handle.slot!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.startSourceSpan,\n              ),\n        );\n        break;\n      case ir.OpKind.Container:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domElementContainer(\n                op.handle.slot!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.wholeSourceSpan,\n              )\n            : ng.elementContainer(\n                op.handle.slot!,\n                op.attributes as number | null,\n                op.localRefs as number | null,\n                op.wholeSourceSpan,\n              ),\n        );\n        break;\n      case ir.OpKind.ContainerEnd:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domElementContainerEnd()\n            : ng.elementContainerEnd(),\n        );\n        break;\n      case ir.OpKind.I18nStart:\n        ir.OpList.replace(\n          op,\n          ng.i18nStart(op.handle.slot!, op.messageIndex!, op.subTemplateIndex!, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.I18nEnd:\n        ir.OpList.replace(op, ng.i18nEnd(op.sourceSpan));\n        break;\n      case ir.OpKind.I18n:\n        ir.OpList.replace(\n          op,\n          ng.i18n(op.handle.slot!, op.messageIndex!, op.subTemplateIndex!, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.I18nAttributes:\n        if (op.i18nAttributesConfig === null) {\n          throw new Error(`AssertionError: i18nAttributesConfig was not set`);\n        }\n        ir.OpList.replace(op, ng.i18nAttributes(op.handle.slot!, op.i18nAttributesConfig));\n        break;\n      case ir.OpKind.Template:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        if (Array.isArray(op.localRefs)) {\n          throw new Error(\n            `AssertionError: local refs array should have been extracted into a constant`,\n          );\n        }\n        const childView = unit.job.views.get(op.xref)!;\n        ir.OpList.replace(\n          op,\n          // Block templates can't have directives so we can always generate them as DOM-only.\n          op.templateKind === ir.TemplateKind.Block ||\n            unit.job.mode === TemplateCompilationMode.DomOnly\n            ? ng.domTemplate(\n                op.handle.slot!,\n                o.variable(childView.fnName!),\n                childView.decls!,\n                childView.vars!,\n                op.tag,\n                op.attributes,\n                op.localRefs,\n                op.startSourceSpan,\n              )\n            : ng.template(\n                op.handle.slot!,\n                o.variable(childView.fnName!),\n                childView.decls!,\n                childView.vars!,\n                op.tag,\n                op.attributes,\n                op.localRefs,\n                op.startSourceSpan,\n              ),\n        );\n        break;\n      case ir.OpKind.DisableBindings:\n        ir.OpList.replace(op, ng.disableBindings());\n        break;\n      case ir.OpKind.EnableBindings:\n        ir.OpList.replace(op, ng.enableBindings());\n        break;\n      case ir.OpKind.Pipe:\n        ir.OpList.replace(op, ng.pipe(op.handle.slot!, op.name));\n        break;\n      case ir.OpKind.DeclareLet:\n        ir.OpList.replace(op, ng.declareLet(op.handle.slot!, op.sourceSpan));\n        break;\n      case ir.OpKind.AnimationString:\n        ir.OpList.replace(\n          op,\n          ng.animationString(op.animationKind, op.expression, op.sanitizer, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.Animation:\n        const animationCallbackFn = reifyListenerHandler(\n          unit,\n          op.handlerFnName!,\n          op.handlerOps,\n          /* consumesDollarEvent */ false,\n        );\n        ir.OpList.replace(\n          op,\n          ng.animation(op.animationKind, animationCallbackFn, op.sanitizer, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.AnimationListener:\n        const animationListenerFn = reifyListenerHandler(\n          unit,\n          op.handlerFnName!,\n          op.handlerOps,\n          op.consumesDollarEvent,\n        );\n\n        ir.OpList.replace(\n          op,\n          ng.animationListener(op.animationKind, animationListenerFn, null, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.Listener:\n        const listenerFn = reifyListenerHandler(\n          unit,\n          op.handlerFnName!,\n          op.handlerOps,\n          op.consumesDollarEvent,\n        );\n        const eventTargetResolver = op.eventTarget\n          ? GLOBAL_TARGET_RESOLVERS.get(op.eventTarget)\n          : null;\n        if (eventTargetResolver === undefined) {\n          throw new Error(\n            `Unexpected global target '${op.eventTarget}' defined for '${op.name}' event. Supported list of global targets: window,document,body.`,\n          );\n        }\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly &&\n            !op.hostListener &&\n            !op.isLegacyAnimationListener\n            ? ng.domListener(op.name, listenerFn, eventTargetResolver, op.sourceSpan)\n            : ng.listener(\n                op.name,\n                listenerFn,\n                eventTargetResolver,\n                op.hostListener && op.isLegacyAnimationListener,\n                op.sourceSpan,\n              ),\n        );\n        break;\n      case ir.OpKind.TwoWayListener:\n        ir.OpList.replace(\n          op,\n          ng.twoWayListener(\n            op.name,\n            reifyListenerHandler(unit, op.handlerFnName!, op.handlerOps, true),\n            op.sourceSpan,\n          ),\n        );\n        break;\n      case ir.OpKind.Variable:\n        if (op.variable.name === null) {\n          throw new Error(`AssertionError: unnamed variable ${op.xref}`);\n        }\n        ir.OpList.replace<ir.CreateOp>(\n          op,\n          ir.createStatementOp(\n            new o.DeclareVarStmt(op.variable.name, op.initializer, undefined, o.StmtModifier.Final),\n          ),\n        );\n        break;\n      case ir.OpKind.Namespace:\n        switch (op.active) {\n          case ir.Namespace.HTML:\n            ir.OpList.replace<ir.CreateOp>(op, ng.namespaceHTML());\n            break;\n          case ir.Namespace.SVG:\n            ir.OpList.replace<ir.CreateOp>(op, ng.namespaceSVG());\n            break;\n          case ir.Namespace.Math:\n            ir.OpList.replace<ir.CreateOp>(op, ng.namespaceMath());\n            break;\n        }\n        break;\n      case ir.OpKind.Defer:\n        const timerScheduling =\n          !!op.loadingMinimumTime || !!op.loadingAfterTime || !!op.placeholderMinimumTime;\n        ir.OpList.replace(\n          op,\n          ng.defer(\n            op.handle.slot!,\n            op.mainSlot.slot!,\n            op.resolverFn,\n            op.loadingSlot?.slot ?? null,\n            op.placeholderSlot?.slot! ?? null,\n            op.errorSlot?.slot ?? null,\n            op.loadingConfig,\n            op.placeholderConfig,\n            timerScheduling,\n            op.sourceSpan,\n            op.flags,\n          ),\n        );\n        break;\n      case ir.OpKind.DeferOn:\n        let args: (number | null)[] = [];\n        switch (op.trigger.kind) {\n          case ir.DeferTriggerKind.Never:\n          case ir.DeferTriggerKind.Idle:\n          case ir.DeferTriggerKind.Immediate:\n            break;\n          case ir.DeferTriggerKind.Timer:\n            args = [op.trigger.delay];\n            break;\n          case ir.DeferTriggerKind.Interaction:\n          case ir.DeferTriggerKind.Hover:\n          case ir.DeferTriggerKind.Viewport:\n            // `hydrate` triggers don't support targets.\n            if (op.modifier === ir.DeferOpModifierKind.HYDRATE) {\n              args = [];\n            } else {\n              // The slots not being defined at this point is invalid, however we\n              // catch it during type checking. Pass in null in such cases.\n              args = [op.trigger.targetSlot?.slot ?? null];\n              if (op.trigger.targetSlotViewSteps !== 0) {\n                args.push(op.trigger.targetSlotViewSteps);\n              }\n            }\n            break;\n          default:\n            throw new Error(\n              `AssertionError: Unsupported reification of defer trigger kind ${\n                (op.trigger as any).kind\n              }`,\n            );\n        }\n        ir.OpList.replace(op, ng.deferOn(op.trigger.kind, args, op.modifier, op.sourceSpan));\n        break;\n      case ir.OpKind.ProjectionDef:\n        ir.OpList.replace<ir.CreateOp>(op, ng.projectionDef(op.def));\n        break;\n      case ir.OpKind.Projection:\n        if (op.handle.slot === null) {\n          throw new Error('No slot was assigned for project instruction');\n        }\n        let fallbackViewFnName: string | null = null;\n        let fallbackDecls: number | null = null;\n        let fallbackVars: number | null = null;\n        if (op.fallbackView !== null) {\n          if (!(unit instanceof ViewCompilationUnit)) {\n            throw new Error(`AssertionError: must be compiling a component`);\n          }\n          const fallbackView = unit.job.views.get(op.fallbackView);\n          if (fallbackView === undefined) {\n            throw new Error(\n              'AssertionError: projection had fallback view xref, but fallback view was not found',\n            );\n          }\n          if (\n            fallbackView.fnName === null ||\n            fallbackView.decls === null ||\n            fallbackView.vars === null\n          ) {\n            throw new Error(\n              `AssertionError: expected projection fallback view to have been named and counted`,\n            );\n          }\n          fallbackViewFnName = fallbackView.fnName;\n          fallbackDecls = fallbackView.decls;\n          fallbackVars = fallbackView.vars;\n        }\n        ir.OpList.replace<ir.CreateOp>(\n          op,\n          ng.projection(\n            op.handle.slot!,\n            op.projectionSlotIndex,\n            op.attributes,\n            fallbackViewFnName,\n            fallbackDecls,\n            fallbackVars,\n            op.sourceSpan,\n          ),\n        );\n        break;\n      case ir.OpKind.ConditionalCreate:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        if (Array.isArray(op.localRefs)) {\n          throw new Error(\n            `AssertionError: local refs array should have been extracted into a constant`,\n          );\n        }\n        const conditionalCreateChildView = unit.job.views.get(op.xref)!;\n        ir.OpList.replace(\n          op,\n          ng.conditionalCreate(\n            op.handle.slot!,\n            o.variable(conditionalCreateChildView.fnName!),\n            conditionalCreateChildView.decls!,\n            conditionalCreateChildView.vars!,\n            op.tag,\n            op.attributes,\n            op.localRefs,\n            op.startSourceSpan,\n          ),\n        );\n        break;\n      case ir.OpKind.ConditionalBranchCreate:\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        if (Array.isArray(op.localRefs)) {\n          throw new Error(\n            `AssertionError: local refs array should have been extracted into a constant`,\n          );\n        }\n        const conditionalBranchCreateChildView = unit.job.views.get(op.xref)!;\n        ir.OpList.replace(\n          op,\n          ng.conditionalBranchCreate(\n            op.handle.slot!,\n            o.variable(conditionalBranchCreateChildView.fnName!),\n            conditionalBranchCreateChildView.decls!,\n            conditionalBranchCreateChildView.vars!,\n            op.tag,\n            op.attributes,\n            op.localRefs,\n            op.startSourceSpan,\n          ),\n        );\n        break;\n      case ir.OpKind.RepeaterCreate:\n        if (op.handle.slot === null) {\n          throw new Error('No slot was assigned for repeater instruction');\n        }\n        if (!(unit instanceof ViewCompilationUnit)) {\n          throw new Error(`AssertionError: must be compiling a component`);\n        }\n        const repeaterView = unit.job.views.get(op.xref)!;\n        if (repeaterView.fnName === null) {\n          throw new Error(`AssertionError: expected repeater primary view to have been named`);\n        }\n\n        let emptyViewFnName: string | null = null;\n        let emptyDecls: number | null = null;\n        let emptyVars: number | null = null;\n        if (op.emptyView !== null) {\n          const emptyView = unit.job.views.get(op.emptyView);\n          if (emptyView === undefined) {\n            throw new Error(\n              'AssertionError: repeater had empty view xref, but empty view was not found',\n            );\n          }\n          if (emptyView.fnName === null || emptyView.decls === null || emptyView.vars === null) {\n            throw new Error(\n              `AssertionError: expected repeater empty view to have been named and counted`,\n            );\n          }\n          emptyViewFnName = emptyView.fnName;\n          emptyDecls = emptyView.decls;\n          emptyVars = emptyView.vars;\n        }\n\n        ir.OpList.replace(\n          op,\n          ng.repeaterCreate(\n            op.handle.slot,\n            repeaterView.fnName,\n            op.decls!,\n            op.vars!,\n            op.tag,\n            op.attributes,\n            reifyTrackBy(unit, op),\n            op.usesComponentInstance,\n            emptyViewFnName,\n            emptyDecls,\n            emptyVars,\n            op.emptyTag,\n            op.emptyAttributes,\n            op.wholeSourceSpan,\n          ),\n        );\n        break;\n      case ir.OpKind.SourceLocation:\n        const locationsLiteral = o.literalArr(\n          op.locations.map(({targetSlot, offset, line, column}) => {\n            if (targetSlot.slot === null) {\n              throw new Error('No slot was assigned for source location');\n            }\n            return o.literalArr([\n              o.literal(targetSlot.slot),\n              o.literal(offset),\n              o.literal(line),\n              o.literal(column),\n            ]);\n          }),\n        );\n\n        ir.OpList.replace(op, ng.attachSourceLocation(op.templatePath, locationsLiteral));\n        break;\n      case ir.OpKind.Statement:\n        // Pass statement operations directly through.\n        break;\n      default:\n        throw new Error(\n          `AssertionError: Unsupported reification of create op ${ir.OpKind[op.kind]}`,\n        );\n    }\n  }\n}\n\nfunction reifyUpdateOperations(unit: CompilationUnit, ops: ir.OpList<ir.UpdateOp>): void {\n  for (const op of ops) {\n    ir.transformExpressionsInOp(op, reifyIrExpression, ir.VisitorContextFlag.None);\n\n    switch (op.kind) {\n      case ir.OpKind.Advance:\n        ir.OpList.replace(op, ng.advance(op.delta, op.sourceSpan));\n        break;\n      case ir.OpKind.Property:\n        ir.OpList.replace(\n          op,\n          unit.job.mode === TemplateCompilationMode.DomOnly &&\n            op.bindingKind !== ir.BindingKind.LegacyAnimation &&\n            op.bindingKind !== ir.BindingKind.Animation\n            ? reifyDomProperty(op)\n            : reifyProperty(op),\n        );\n        break;\n      case ir.OpKind.TwoWayProperty:\n        ir.OpList.replace(\n          op,\n          ng.twoWayProperty(op.name, op.expression, op.sanitizer, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.StyleProp:\n        ir.OpList.replace(op, ng.styleProp(op.name, op.expression, op.unit, op.sourceSpan));\n        break;\n      case ir.OpKind.ClassProp:\n        ir.OpList.replace(op, ng.classProp(op.name, op.expression, op.sourceSpan));\n        break;\n      case ir.OpKind.StyleMap:\n        ir.OpList.replace(op, ng.styleMap(op.expression, op.sourceSpan));\n        break;\n      case ir.OpKind.ClassMap:\n        ir.OpList.replace(op, ng.classMap(op.expression, op.sourceSpan));\n        break;\n      case ir.OpKind.I18nExpression:\n        ir.OpList.replace(op, ng.i18nExp(op.expression, op.sourceSpan));\n        break;\n      case ir.OpKind.I18nApply:\n        ir.OpList.replace(op, ng.i18nApply(op.handle.slot!, op.sourceSpan));\n        break;\n      case ir.OpKind.InterpolateText:\n        ir.OpList.replace(\n          op,\n          ng.textInterpolate(op.interpolation.strings, op.interpolation.expressions, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.Attribute:\n        ir.OpList.replace(\n          op,\n          ng.attribute(op.name, op.expression, op.sanitizer, op.namespace, op.sourceSpan),\n        );\n        break;\n      case ir.OpKind.DomProperty:\n        if (op.expression instanceof ir.Interpolation) {\n          throw new Error('not yet handled');\n        } else {\n          if (\n            op.bindingKind === ir.BindingKind.LegacyAnimation ||\n            op.bindingKind === ir.BindingKind.Animation\n          ) {\n            ir.OpList.replace(op, ng.syntheticHostProperty(op.name, op.expression, op.sourceSpan));\n          } else {\n            ir.OpList.replace(op, reifyDomProperty(op));\n          }\n        }\n        break;\n      case ir.OpKind.Variable:\n        if (op.variable.name === null) {\n          throw new Error(`AssertionError: unnamed variable ${op.xref}`);\n        }\n        ir.OpList.replace<ir.UpdateOp>(\n          op,\n          ir.createStatementOp(\n            new o.DeclareVarStmt(op.variable.name, op.initializer, undefined, o.StmtModifier.Final),\n          ),\n        );\n        break;\n      case ir.OpKind.Conditional:\n        if (op.processed === null) {\n          throw new Error(`Conditional test was not set.`);\n        }\n        ir.OpList.replace(op, ng.conditional(op.processed, op.contextValue, op.sourceSpan));\n        break;\n      case ir.OpKind.Repeater:\n        ir.OpList.replace(op, ng.repeater(op.collection, op.sourceSpan));\n        break;\n      case ir.OpKind.DeferWhen:\n        ir.OpList.replace(op, ng.deferWhen(op.modifier, op.expr, op.sourceSpan));\n        break;\n      case ir.OpKind.StoreLet:\n        throw new Error(`AssertionError: unexpected storeLet ${op.declaredName}`);\n      case ir.OpKind.Statement:\n        // Pass statement operations directly through.\n        break;\n      default:\n        throw new Error(\n          `AssertionError: Unsupported reification of update op ${ir.OpKind[op.kind]}`,\n        );\n    }\n  }\n}\n\n/**\n * Reifies a DOM property binding operation.\n *\n * This is an optimized version of {@link reifyProperty} that avoids unnecessarily trying to bind\n * to directive inputs at runtime for views that don't import any directives.\n *\n * @param op A property binding operation.\n * @returns A statement to update the property at runtime.\n */\nfunction reifyDomProperty(op: ir.DomPropertyOp | ir.PropertyOp): ir.UpdateOp {\n  return ng.domProperty(\n    DOM_PROPERTY_REMAPPING.get(op.name) ?? op.name,\n    op.expression,\n    op.sanitizer,\n    op.sourceSpan,\n  );\n}\n\n/**\n * Reifies a property binding operation.\n *\n * The returned statement attempts to bind to directive inputs before falling back to a DOM\n * property.\n *\n * @param op A property binding operation.\n * @returns A statement to update the property at runtime.\n */\nfunction reifyProperty(op: ir.PropertyOp): ir.UpdateOp {\n  return isAriaAttribute(op.name)\n    ? ng.ariaProperty(op.name, op.expression, op.sourceSpan)\n    : ng.property(op.name, op.expression, op.sanitizer, op.sourceSpan);\n}\n\nfunction reifyIrExpression(expr: o.Expression): o.Expression {\n  if (!ir.isIrExpression(expr)) {\n    return expr;\n  }\n\n  switch (expr.kind) {\n    case ir.ExpressionKind.NextContext:\n      return ng.nextContext(expr.steps);\n    case ir.ExpressionKind.Reference:\n      return ng.reference(expr.targetSlot.slot! + 1 + expr.offset);\n    case ir.ExpressionKind.LexicalRead:\n      throw new Error(`AssertionError: unresolved LexicalRead of ${expr.name}`);\n    case ir.ExpressionKind.TwoWayBindingSet:\n      throw new Error(`AssertionError: unresolved TwoWayBindingSet`);\n    case ir.ExpressionKind.RestoreView:\n      if (typeof expr.view === 'number') {\n        throw new Error(`AssertionError: unresolved RestoreView`);\n      }\n      return ng.restoreView(expr.view);\n    case ir.ExpressionKind.ResetView:\n      return ng.resetView(expr.expr);\n    case ir.ExpressionKind.GetCurrentView:\n      return ng.getCurrentView();\n    case ir.ExpressionKind.ReadVariable:\n      if (expr.name === null) {\n        throw new Error(`Read of unnamed variable ${expr.xref}`);\n      }\n      return o.variable(expr.name);\n    case ir.ExpressionKind.ReadTemporaryExpr:\n      if (expr.name === null) {\n        throw new Error(`Read of unnamed temporary ${expr.xref}`);\n      }\n      return o.variable(expr.name);\n    case ir.ExpressionKind.AssignTemporaryExpr:\n      if (expr.name === null) {\n        throw new Error(`Assign of unnamed temporary ${expr.xref}`);\n      }\n      return o.variable(expr.name).set(expr.expr);\n    case ir.ExpressionKind.PureFunctionExpr:\n      if (expr.fn === null) {\n        throw new Error(`AssertionError: expected PureFunctions to have been extracted`);\n      }\n      return ng.pureFunction(expr.varOffset!, expr.fn, expr.args);\n    case ir.ExpressionKind.PureFunctionParameterExpr:\n      throw new Error(`AssertionError: expected PureFunctionParameterExpr to have been extracted`);\n    case ir.ExpressionKind.PipeBinding:\n      return ng.pipeBind(expr.targetSlot.slot!, expr.varOffset!, expr.args);\n    case ir.ExpressionKind.PipeBindingVariadic:\n      return ng.pipeBindV(expr.targetSlot.slot!, expr.varOffset!, expr.args);\n    case ir.ExpressionKind.SlotLiteralExpr:\n      return o.literal(expr.slot.slot!);\n    case ir.ExpressionKind.ContextLetReference:\n      return ng.readContextLet(expr.targetSlot.slot!);\n    case ir.ExpressionKind.StoreLet:\n      return ng.storeLet(expr.value, expr.sourceSpan);\n    case ir.ExpressionKind.TrackContext:\n      return o.variable('this');\n    default:\n      throw new Error(\n        `AssertionError: Unsupported reification of ir.Expression kind: ${\n          ir.ExpressionKind[(expr as ir.Expression).kind]\n        }`,\n      );\n  }\n}\n\n/**\n * Listeners get turned into a function expression, which may or may not have the `$event`\n * parameter defined.\n */\nfunction reifyListenerHandler(\n  unit: CompilationUnit,\n  name: string,\n  handlerOps: ir.OpList<ir.UpdateOp>,\n  consumesDollarEvent: boolean,\n): o.FunctionExpr {\n  // First, reify all instruction calls within `handlerOps`.\n  reifyUpdateOperations(unit, handlerOps);\n\n  // Next, extract all the `o.Statement`s from the reified operations. We can expect that at this\n  // point, all operations have been converted to statements.\n  const handlerStmts: o.Statement[] = [];\n  for (const op of handlerOps) {\n    if (op.kind !== ir.OpKind.Statement) {\n      throw new Error(\n        `AssertionError: expected reified statements, but found op ${ir.OpKind[op.kind]}`,\n      );\n    }\n    handlerStmts.push(op.statement);\n  }\n\n  // If `$event` is referenced, we need to generate it as a parameter.\n  const params: o.FnParam[] = [];\n  if (consumesDollarEvent) {\n    // We need the `$event` parameter.\n    params.push(new o.FnParam('$event'));\n  }\n\n  return o.fn(params, handlerStmts, undefined, undefined, name);\n}\n\n/** Reifies the tracking expression of a `RepeaterCreateOp`. */\nfunction reifyTrackBy(unit: CompilationUnit, op: ir.RepeaterCreateOp): o.Expression {\n  // If the tracking function was created already, there's nothing left to do.\n  if (op.trackByFn !== null) {\n    return op.trackByFn;\n  }\n\n  const params: o.FnParam[] = [new o.FnParam('$index'), new o.FnParam('$item')];\n  let fn: o.FunctionExpr | o.ArrowFunctionExpr;\n\n  if (op.trackByOps === null) {\n    // If there are no additional ops related to the tracking function, we just need\n    // to turn it into a function that returns the result of the expression.\n    fn = op.usesComponentInstance\n      ? o.fn(params, [new o.ReturnStatement(op.track)])\n      : o.arrowFn(params, op.track);\n  } else {\n    // Otherwise first we need to reify the track-related ops.\n    reifyUpdateOperations(unit, op.trackByOps);\n\n    const statements: o.Statement[] = [];\n    for (const trackOp of op.trackByOps) {\n      if (trackOp.kind !== ir.OpKind.Statement) {\n        throw new Error(\n          `AssertionError: expected reified statements, but found op ${ir.OpKind[trackOp.kind]}`,\n        );\n      }\n      statements.push(trackOp.statement);\n    }\n\n    // Afterwards we can create the function from those ops.\n    fn =\n      op.usesComponentInstance ||\n      statements.length !== 1 ||\n      !(statements[0] instanceof o.ReturnStatement)\n        ? o.fn(params, statements)\n        : o.arrowFn(params, statements[0].value);\n  }\n\n  op.trackByFn = unit.job.pool.getSharedFunctionReference(fn, '_forTrack');\n  return op.trackByFn;\n}\n"]}