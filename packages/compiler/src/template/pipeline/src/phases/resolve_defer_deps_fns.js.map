{"version":3,"file":"resolve_defer_deps_fns.js","sourceRoot":"","sources":["resolve_defer_deps_fns.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAEH,OAAO,KAAK,EAAE,MAAM,UAAU,CAAC;AAG/B;;GAEG;AACH,MAAM,UAAU,mBAAmB,CAAC,GAA4B;IAC9D,KAAK,MAAM,IAAI,IAAI,GAAG,CAAC,KAAK,EAAE,CAAC;QAC7B,KAAK,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YAC7B,IAAI,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;gBAChC,IAAI,EAAE,CAAC,UAAU,KAAK,IAAI,EAAE,CAAC;oBAC3B,SAAS;gBACX,CAAC;gBAED,IAAI,EAAE,CAAC,aAAa,KAAK,IAAI,EAAE,CAAC;oBAC9B,IAAI,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC;wBAC5B,MAAM,IAAI,KAAK,CACb,8EAA8E,CAC/E,CAAC;oBACJ,CAAC;oBACD,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;oBAC3D,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,0BAA0B,CACjD,EAAE,CAAC,aAAa,EAChB,GAAG,YAAY,UAAU,EAAE,CAAC,MAAM,CAAC,IAAI,SAAS;oBAChD,kDAAkD,CAAC,KAAK,CACzD,CAAC;gBACJ,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;AACH,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport * as ir from '../../ir';\nimport {ComponentCompilationJob} from '../compilation';\n\n/**\n * Resolve the dependency function of a deferred block.\n */\nexport function resolveDeferDepsFns(job: ComponentCompilationJob): void {\n  for (const unit of job.units) {\n    for (const op of unit.create) {\n      if (op.kind === ir.OpKind.Defer) {\n        if (op.resolverFn !== null) {\n          continue;\n        }\n\n        if (op.ownResolverFn !== null) {\n          if (op.handle.slot === null) {\n            throw new Error(\n              'AssertionError: slot must be assigned before extracting defer deps functions',\n            );\n          }\n          const fullPathName = unit.fnName?.replace('_Template', '');\n          op.resolverFn = job.pool.getSharedFunctionReference(\n            op.ownResolverFn,\n            `${fullPathName}_Defer_${op.handle.slot}_DepsFn`,\n            /* Don't use unique names for TDB compatibility */ false,\n          );\n        }\n      }\n    }\n  }\n}\n"]}